{{page-title "Detail"}}
<div class="slide-out-bg"></div>

<div class="slide-out">
    <div class="slide-out-card">
        <LinkTo @route="author" class="btn-back"><span class="sr-only">Back</span></LinkTo>

        <div class="slide-out-heading">
            <div class="title">
                <h3>{{@model.lastName}}, {{@model.firstName}}</h3>

                <div class="actions">
                    {{#if (can "edit author" @model)}}
                        <LinkTo @route="author.edit" @model={{@model.id}}>
                            <button class="btn-pop" type="button">edit</button>
                        </LinkTo>
                    {{/if}}

                    {{#if (can "delet author" @model)}}
                        <button class="btn-recessed" type="button" {{on "click" (fn this.deleteAuthor @model)}}>
                            delete
                        </button>
                    {{/if}}
                </div>
            </div>

            <div class="details">
                <p>
                    <strong>Added By:</strong>

                    {{@model.username}}
                </p>
            </div>
        </div>
        <div class="slide-out-content">
            <div class="title">
                <h3>{{@model.books.length}} Books from this author</h3>
            </div>

            <div class="actions">
                <LinkTo @route="author.detail.new-book" @model={{@model.id}}>
                    <button type="button" class="btn-secondary btn-add">
                        Add a book
                    </button>
                </LinkTo>
            </div>

            <ul class="book-list">
                {{#each @model.books as |book|}}
                    <li class="book">
                        <p class="book-title">
                            <LinkTo @route="book.detail" @model={{book.id}}>{{book.title}}</LinkTo>
                        </p>
                        <p class="book-isbn">{{book.isbn}}</p>
                    </li>
                {{/each}}
            </ul>
        </div>
    </div>
</div>

{{liquid-outlet}}
